sudo: required

services:
  - docker

install:
  # place apparmor docker profile in complain mode
  # to workaround https://github.com/travis-ci/travis-ci/issues/4661
  - sudo apt-get -y update
  - sudo apt-get -y install apparmor-utils
  - sudo aa-complain /etc/apparmor.d/docker

env:
  - NODE_VERSION=latest
  - NODE_VERSION=0.12
  - NODE_VERSION=0.12.7
  - NODE_VERSION=4
  - NODE_VERSION=4.1
  - NODE_VERSION=4.1.1
  - NODE_VERSION=4.2
  - NODE_VERSION=4.2.0

script:
  - make build-$NODE_VERSION
  - make test-all-$NODE_VERSION